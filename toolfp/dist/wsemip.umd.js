/*!
 * wsemip v1.7.87
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("path"),require("fs")):"function"==typeof define&&define.amd?define(["exports","path","fs"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).wsemip={},t.path,t.fs)}(this,(function(t,e,r){"use strict";function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var o={exports:{}};!function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}function o(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function i(t,e,n,i,u){if("function"!=typeof n)throw new TypeError("The listener must be a function");var c=new o(n,i||t,u),f=r?r+e:e;return t._events[f]?t._events[f].fn?t._events[f]=[t._events[f],c]:t._events[f].push(c):(t._events[f]=c,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function c(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),c.prototype.eventNames=function(){var t,n,o=[];if(0===this._eventsCount)return o;for(n in t=this._events)e.call(t,n)&&o.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},c.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,u=new Array(i);o<i;o++)u[o]=n[o].fn;return u},c.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},c.prototype.emit=function(t,e,n,o,i,u){var c=r?r+t:t;if(!this._events[c])return!1;var f,a,s=this._events[c],l=arguments.length;if(s.fn){switch(s.once&&this.removeListener(t,s.fn,void 0,!0),l){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,e),!0;case 3:return s.fn.call(s.context,e,n),!0;case 4:return s.fn.call(s.context,e,n,o),!0;case 5:return s.fn.call(s.context,e,n,o,i),!0;case 6:return s.fn.call(s.context,e,n,o,i,u),!0}for(a=1,f=new Array(l-1);a<l;a++)f[a-1]=arguments[a];s.fn.apply(s.context,f)}else{var p,h=s.length;for(a=0;a<h;a++)switch(s[a].once&&this.removeListener(t,s[a].fn,void 0,!0),l){case 1:s[a].fn.call(s[a].context);break;case 2:s[a].fn.call(s[a].context,e);break;case 3:s[a].fn.call(s[a].context,e,n);break;case 4:s[a].fn.call(s[a].context,e,n,o);break;default:if(!f)for(p=1,f=new Array(l-1);p<l;p++)f[p-1]=arguments[p];s[a].fn.apply(s[a].context,f)}}return!0},c.prototype.on=function(t,e,r){return i(this,t,e,r,!1)},c.prototype.once=function(t,e,r){return i(this,t,e,r,!0)},c.prototype.removeListener=function(t,e,n,o){var i=r?r+t:t;if(!this._events[i])return this;if(!e)return u(this,i),this;var c=this._events[i];if(c.fn)c.fn!==e||o&&!c.once||n&&c.context!==n||u(this,i);else{for(var f=0,a=[],s=c.length;f<s;f++)(c[f].fn!==e||o&&!c[f].once||n&&c[f].context!==n)&&a.push(c[f]);a.length?this._events[i]=1===a.length?a[0]:a:u(this,i)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&u(this,e)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c}(o);var i=n(o.exports);function u(){return new i}var c=Array.isArray,f="object"==typeof global&&global&&global.Object===Object&&global,a="object"==typeof self&&self&&self.Object===Object&&self,s=f||a||Function("return this")(),l=s.Symbol,p=Object.prototype,h=p.hasOwnProperty,v=p.toString,y=l?l.toStringTag:void 0;var d=Object.prototype.toString;var b="[object Null]",g="[object Undefined]",j=l?l.toStringTag:void 0;function m(t){return null==t?void 0===t?g:b:j&&j in Object(t)?function(t){var e=h.call(t,y),r=t[y];try{t[y]=void 0;var n=!0}catch(t){}var o=v.call(t);return n&&(e?t[y]=r:delete t[y]),o}(t):function(t){return d.call(t)}(t)}function _(t){return null!=t&&"object"==typeof t}var w="[object Symbol]";function O(t){return"symbol"==typeof t||_(t)&&m(t)==w}var S=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,x=/^\w*$/;function P(t,e){if(c(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!O(t))||(x.test(t)||!S.test(t)||null!=e&&t in Object(e))}function A(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var k="[object AsyncFunction]",F="[object Function]",E="[object GeneratorFunction]",z="[object Proxy]";function R(t){if(!A(t))return!1;var e=m(t);return e==F||e==E||e==k||e==z}var $,D=s["__core-js_shared__"],I=($=/[^.]+$/.exec(D&&D.keys&&D.keys.IE_PROTO||""))?"Symbol(src)_1."+$:"";var T=Function.prototype.toString;function C(t){if(null!=t){try{return T.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var N=/^\[object .+?Constructor\]$/,L=Function.prototype,M=Object.prototype,B=L.toString,U=M.hasOwnProperty,W=RegExp("^"+B.call(U).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function q(t){return!(!A(t)||(e=t,I&&I in e))&&(R(t)?W:N).test(C(t));var e}function G(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return q(r)?r:void 0}var V=G(Object,"create");var J=Object.prototype.hasOwnProperty;var H=Object.prototype.hasOwnProperty;function Q(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function K(t,e){return t===e||t!=t&&e!=e}function X(t,e){for(var r=t.length;r--;)if(K(t[r][0],e))return r;return-1}Q.prototype.clear=function(){this.__data__=V?V(null):{},this.size=0},Q.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Q.prototype.get=function(t){var e=this.__data__;if(V){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return J.call(e,t)?e[t]:void 0},Q.prototype.has=function(t){var e=this.__data__;return V?void 0!==e[t]:H.call(e,t)},Q.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=V&&void 0===e?"__lodash_hash_undefined__":e,this};var Y=Array.prototype.splice;function Z(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Z.prototype.clear=function(){this.__data__=[],this.size=0},Z.prototype.delete=function(t){var e=this.__data__,r=X(e,t);return!(r<0)&&(r==e.length-1?e.pop():Y.call(e,r,1),--this.size,!0)},Z.prototype.get=function(t){var e=this.__data__,r=X(e,t);return r<0?void 0:e[r][1]},Z.prototype.has=function(t){return X(this.__data__,t)>-1},Z.prototype.set=function(t,e){var r=this.__data__,n=X(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};var tt=G(s,"Map");function et(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function rt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}rt.prototype.clear=function(){this.size=0,this.__data__={hash:new Q,map:new(tt||Z),string:new Q}},rt.prototype.delete=function(t){var e=et(this,t).delete(t);return this.size-=e?1:0,e},rt.prototype.get=function(t){return et(this,t).get(t)},rt.prototype.has=function(t){return et(this,t).has(t)},rt.prototype.set=function(t,e){var r=et(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};var nt="Expected a function";function ot(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(nt);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var u=t.apply(this,n);return r.cache=i.set(o,u)||i,u};return r.cache=new(ot.Cache||rt),r}ot.Cache=rt;var it,ut,ct,ft=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,at=/\\(\\)?/g,st=(it=function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(ft,(function(t,r,n,o){e.push(n?o.replace(at,"$1"):r||t)})),e},ut=ot(it,(function(t){return 500===ct.size&&ct.clear(),t})),ct=ut.cache,ut),lt=st;function pt(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}var ht=1/0,vt=l?l.prototype:void 0,yt=vt?vt.toString:void 0;function dt(t){if("string"==typeof t)return t;if(c(t))return pt(t,dt)+"";if(O(t))return yt?yt.call(t):"";var e=t+"";return"0"==e&&1/t==-ht?"-0":e}function bt(t){return null==t?"":dt(t)}function gt(t,e){return c(t)?t:P(t,e)?[t]:lt(bt(t))}var jt=1/0;function mt(t){if("string"==typeof t||O(t))return t;var e=t+"";return"0"==e&&1/t==-jt?"-0":e}function _t(t,e){for(var r=0,n=(e=gt(e,t)).length;null!=t&&r<n;)t=t[mt(e[r++])];return r&&r==n?t:void 0}function wt(t,e,r){var n=null==t?void 0:_t(t,e);return void 0===n?r:n}function Ot(t){let e=wt(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"fs");if(!e.existsSync(t))return!1;let r=e.lstatSync(t);return!r.isFile()&&!r.isSymbolicLink()}function St(t){let e=wt(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"fs");if(Ot(t,{fs:e}))return{success:"input folder is already exists: "+t};if(e.existsSync(t))return{error:"input path already exists: "+t};try{e.mkdirSync(t,{recursive:!0})}catch(t){return{error:t}}return{success:"done: "+t}}function xt(t){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xt(t)}function Pt(t){var e=function(t,e){if("object"!==xt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==xt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===xt(e)?e:String(e)}function At(t,e,r){return(e=Pt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var kt="[object Boolean]";function Ft(t){return!0===t||!1===t||_(t)&&m(t)==kt}function Et(t){return Ft(t)}function zt(t){let e=wt(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"fs");return!!e.existsSync(t)&&(!e.lstatSync(t).isDirectory()&&!e.lstatSync(t).isSymbolicLink())}function Rt(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=wt(r,"path"),o=wt(r,"fs"),i=wt(r,"useSync","");Et(i)||(i=!0);let u="";return u=i?function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=wt(r,"path"),o=wt(r,"fs");if(!zt(t,{fs:o}))return{error:`fpSrc[${t}] is not a file`};try{St(n.dirname(e),{fs:o}),o.copyFileSync(t,e)}catch(t){return{error:t}}return{success:"done: "+e}}(t,e,{path:n,fs:o}):async function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=wt(r,"path"),o=wt(r,"fs");if(!zt(t,{fs:o}))return{error:`fpSrc[${t}] is not a file`};let i=null;return await(async(t,e)=>{St(n.dirname(e),{fs:o}),await new Promise(((r,n)=>{let i=o.createReadStream(t),u=o.createWriteStream(e);i.on("error",n),u.on("error",n),u.on("finish",r),i.pipe(u)}))})(t,e).then((()=>{i={success:"done: "+e}})).catch((t=>{i={error:t}})),i}(t,e,{path:n,fs:o}),u}function $t(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Dt(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=wt(r,"path"),o=wt(r,"fs");if(!Ot(t,{fs:o}))return{error:`fpSrc[${t}] is not a folder`};try{o.readdirSync(t).forEach((function(r){let i=n.resolve(t,r),u=n.resolve(e,r),c=o.lstatSync(i);if(c.isDirectory())St(u,{fs:o}),Dt(i,u,{path:n,fs:o});else if(c.isSymbolicLink()){let t=o.readlinkSync(i);o.symlinkSync(t,u)}else St(n.dirname(u),{fs:o}),o.copyFileSync(i,u)}))}catch(t){return{error:t}}return{success:"done: "+e}}function It(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=wt(r,"path"),o=wt(r,"fs"),i=wt(r,"useSync","");Et(i)||(i=!0);let u="";return u=i?Dt(t,e,{path:n,fs:o}):async function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=wt(r,"path"),o=wt(r,"fs");if(!Ot(t,{fs:o}))return{error:`fpSrc[${t}] is not a folder`};let i=async(t,e)=>{let r=o.readdirSync(t);for(let u of r){let r=n.join(t,u),c=n.join(e,u),f=o.lstatSync(r);if(f.isDirectory())St(c,{fs:o}),await i(r,c);else if(f.isSymbolicLink()){let t=o.readlinkSync(r);o.symlinkSync(t,c)}else St(n.dirname(c),{fs:o}),await new Promise(((t,e)=>{let n=o.createReadStream(r),i=o.createWriteStream(c);n.on("error",e),i.on("error",e),i.on("finish",t),n.pipe(i)}))}},u=null;return await i(t,e).then((()=>{u={success:"done: "+e}})).catch((t=>{u={error:t}})),u}(t,e,{path:n,fs:o}),u}function Tt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ct(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var u=t[r];e(u,r,t)&&(i[o++]=u)}return i}var Nt,Lt=function(t,e,r){for(var n=-1,o=Object(t),i=r(t),u=i.length;u--;){var c=i[Nt?u:++n];if(!1===e(o[c],c,o))break}return t};function Mt(t){return _(t)&&"[object Arguments]"==m(t)}var Bt=Object.prototype,Ut=Bt.hasOwnProperty,Wt=Bt.propertyIsEnumerable,qt=Mt(function(){return arguments}())?Mt:function(t){return _(t)&&Ut.call(t,"callee")&&!Wt.call(t,"callee")},Gt=qt;var Vt="object"==typeof t&&t&&!t.nodeType&&t,Jt=Vt&&"object"==typeof module&&module&&!module.nodeType&&module,Ht=Jt&&Jt.exports===Vt?s.Buffer:void 0,Qt=(Ht?Ht.isBuffer:void 0)||function(){return!1},Kt=9007199254740991,Xt=/^(?:0|[1-9]\d*)$/;function Yt(t,e){var r=typeof t;return!!(e=null==e?Kt:e)&&("number"==r||"symbol"!=r&&Xt.test(t))&&t>-1&&t%1==0&&t<e}var Zt=9007199254740991;function te(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Zt}var ee={};function re(t){return function(e){return t(e)}}ee["[object Float32Array]"]=ee["[object Float64Array]"]=ee["[object Int8Array]"]=ee["[object Int16Array]"]=ee["[object Int32Array]"]=ee["[object Uint8Array]"]=ee["[object Uint8ClampedArray]"]=ee["[object Uint16Array]"]=ee["[object Uint32Array]"]=!0,ee["[object Arguments]"]=ee["[object Array]"]=ee["[object ArrayBuffer]"]=ee["[object Boolean]"]=ee["[object DataView]"]=ee["[object Date]"]=ee["[object Error]"]=ee["[object Function]"]=ee["[object Map]"]=ee["[object Number]"]=ee["[object Object]"]=ee["[object RegExp]"]=ee["[object Set]"]=ee["[object String]"]=ee["[object WeakMap]"]=!1;var ne="object"==typeof t&&t&&!t.nodeType&&t,oe=ne&&"object"==typeof module&&module&&!module.nodeType&&module,ie=oe&&oe.exports===ne&&f.process,ue=function(){try{var t=oe&&oe.require&&oe.require("util").types;return t||ie&&ie.binding&&ie.binding("util")}catch(t){}}(),ce=ue&&ue.isTypedArray,fe=ce?re(ce):function(t){return _(t)&&te(t.length)&&!!ee[m(t)]},ae=Object.prototype.hasOwnProperty;function se(t,e){var r=c(t),n=!r&&Gt(t),o=!r&&!n&&Qt(t),i=!r&&!n&&!o&&fe(t),u=r||n||o||i,f=u?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],a=f.length;for(var s in t)!e&&!ae.call(t,s)||u&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Yt(s,a))||f.push(s);return f}var le=Object.prototype;var pe=function(t,e){return function(r){return t(e(r))}}(Object.keys,Object),he=pe,ve=Object.prototype.hasOwnProperty;function ye(t){if(r=(e=t)&&e.constructor,e!==("function"==typeof r&&r.prototype||le))return he(t);var e,r,n=[];for(var o in Object(t))ve.call(t,o)&&"constructor"!=o&&n.push(o);return n}function de(t){return null!=t&&te(t.length)&&!R(t)}function be(t){return de(t)?se(t):ye(t)}var ge=function(t,e){return function(r,n){if(null==r)return r;if(!de(r))return t(r,n);for(var o=r.length,i=e?o:-1,u=Object(r);(e?i--:++i<o)&&!1!==n(u[i],i,u););return r}}((function(t,e){return t&&Lt(t,e,be)})),je=ge;function me(t,e){var r=[];return je(t,(function(t,n,o){e(t,n,o)&&r.push(t)})),r}function _e(t){var e=this.__data__=new Z(t);this.size=e.size}_e.prototype.clear=function(){this.__data__=new Z,this.size=0},_e.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},_e.prototype.get=function(t){return this.__data__.get(t)},_e.prototype.has=function(t){return this.__data__.has(t)},_e.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Z){var n=r.__data__;if(!tt||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new rt(n)}return r.set(t,e),this.size=r.size,this};function we(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new rt;++e<r;)this.add(t[e])}function Oe(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function Se(t,e){return t.has(e)}we.prototype.add=we.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},we.prototype.has=function(t){return this.__data__.has(t)};var xe=1,Pe=2;function Ae(t,e,r,n,o,i){var u=r&xe,c=t.length,f=e.length;if(c!=f&&!(u&&f>c))return!1;var a=i.get(t),s=i.get(e);if(a&&s)return a==e&&s==t;var l=-1,p=!0,h=r&Pe?new we:void 0;for(i.set(t,e),i.set(e,t);++l<c;){var v=t[l],y=e[l];if(n)var d=u?n(y,v,l,e,t,i):n(v,y,l,t,e,i);if(void 0!==d){if(d)continue;p=!1;break}if(h){if(!Oe(e,(function(t,e){if(!Se(h,e)&&(v===t||o(v,t,r,n,i)))return h.push(e)}))){p=!1;break}}else if(v!==y&&!o(v,y,r,n,i)){p=!1;break}}return i.delete(t),i.delete(e),p}var ke=s.Uint8Array;function Fe(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function Ee(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var ze=1,Re=2,$e="[object Boolean]",De="[object Date]",Ie="[object Error]",Te="[object Map]",Ce="[object Number]",Ne="[object RegExp]",Le="[object Set]",Me="[object String]",Be="[object Symbol]",Ue="[object ArrayBuffer]",We="[object DataView]",qe=l?l.prototype:void 0,Ge=qe?qe.valueOf:void 0;var Ve=Object.prototype.propertyIsEnumerable,Je=Object.getOwnPropertySymbols,He=Je?function(t){return null==t?[]:(t=Object(t),Ct(Je(t),(function(e){return Ve.call(t,e)})))}:function(){return[]};function Qe(t){return function(t,e,r){var n=e(t);return c(t)?n:function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}(n,r(t))}(t,be,He)}var Ke=1,Xe=Object.prototype.hasOwnProperty;var Ye=G(s,"DataView"),Ze=G(s,"Promise"),tr=G(s,"Set"),er=G(s,"WeakMap"),rr="[object Map]",nr="[object Promise]",or="[object Set]",ir="[object WeakMap]",ur="[object DataView]",cr=C(Ye),fr=C(tt),ar=C(Ze),sr=C(tr),lr=C(er),pr=m;(Ye&&pr(new Ye(new ArrayBuffer(1)))!=ur||tt&&pr(new tt)!=rr||Ze&&pr(Ze.resolve())!=nr||tr&&pr(new tr)!=or||er&&pr(new er)!=ir)&&(pr=function(t){var e=m(t),r="[object Object]"==e?t.constructor:void 0,n=r?C(r):"";if(n)switch(n){case cr:return ur;case fr:return rr;case ar:return nr;case sr:return or;case lr:return ir}return e});var hr=pr,vr=1,yr="[object Arguments]",dr="[object Array]",br="[object Object]",gr=Object.prototype.hasOwnProperty;function jr(t,e,r,n,o,i){var u=c(t),f=c(e),a=u?dr:hr(t),s=f?dr:hr(e),l=(a=a==yr?br:a)==br,p=(s=s==yr?br:s)==br,h=a==s;if(h&&Qt(t)){if(!Qt(e))return!1;u=!0,l=!1}if(h&&!l)return i||(i=new _e),u||fe(t)?Ae(t,e,r,n,o,i):function(t,e,r,n,o,i,u){switch(r){case We:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Ue:return!(t.byteLength!=e.byteLength||!i(new ke(t),new ke(e)));case $e:case De:case Ce:return K(+t,+e);case Ie:return t.name==e.name&&t.message==e.message;case Ne:case Me:return t==e+"";case Te:var c=Fe;case Le:var f=n&ze;if(c||(c=Ee),t.size!=e.size&&!f)return!1;var a=u.get(t);if(a)return a==e;n|=Re,u.set(t,e);var s=Ae(c(t),c(e),n,o,i,u);return u.delete(t),s;case Be:if(Ge)return Ge.call(t)==Ge.call(e)}return!1}(t,e,a,r,n,o,i);if(!(r&vr)){var v=l&&gr.call(t,"__wrapped__"),y=p&&gr.call(e,"__wrapped__");if(v||y){var d=v?t.value():t,b=y?e.value():e;return i||(i=new _e),o(d,b,r,n,i)}}return!!h&&(i||(i=new _e),function(t,e,r,n,o,i){var u=r&Ke,c=Qe(t),f=c.length;if(f!=Qe(e).length&&!u)return!1;for(var a=f;a--;){var s=c[a];if(!(u?s in e:Xe.call(e,s)))return!1}var l=i.get(t),p=i.get(e);if(l&&p)return l==e&&p==t;var h=!0;i.set(t,e),i.set(e,t);for(var v=u;++a<f;){var y=t[s=c[a]],d=e[s];if(n)var b=u?n(d,y,s,e,t,i):n(y,d,s,t,e,i);if(!(void 0===b?y===d||o(y,d,r,n,i):b)){h=!1;break}v||(v="constructor"==s)}if(h&&!v){var g=t.constructor,j=e.constructor;g==j||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof j&&j instanceof j||(h=!1)}return i.delete(t),i.delete(e),h}(t,e,r,n,o,i))}function mr(t,e,r,n,o){return t===e||(null==t||null==e||!_(t)&&!_(e)?t!=t&&e!=e:jr(t,e,r,n,mr,o))}var _r=1,wr=2;function Or(t){return t==t&&!A(t)}function Sr(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}function xr(t){var e=function(t){for(var e=be(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,Or(o)]}return e}(t);return 1==e.length&&e[0][2]?Sr(e[0][0],e[0][1]):function(r){return r===t||function(t,e,r,n){var o=r.length,i=o,u=!n;if(null==t)return!i;for(t=Object(t);o--;){var c=r[o];if(u&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++o<i;){var f=(c=r[o])[0],a=t[f],s=c[1];if(u&&c[2]){if(void 0===a&&!(f in t))return!1}else{var l=new _e;if(n)var p=n(a,s,f,t,e,l);if(!(void 0===p?mr(s,a,_r|wr,n,l):p))return!1}}return!0}(r,t,e)}}function Pr(t,e){return null!=t&&e in Object(t)}function Ar(t,e){return null!=t&&function(t,e,r){for(var n=-1,o=(e=gt(e,t)).length,i=!1;++n<o;){var u=mt(e[n]);if(!(i=null!=t&&r(t,u)))break;t=t[u]}return i||++n!=o?i:!!(o=null==t?0:t.length)&&te(o)&&Yt(u,o)&&(c(t)||Gt(t))}(t,e,Pr)}var kr=1,Fr=2;function Er(t){return t}function zr(t){return function(e){return null==e?void 0:e[t]}}function Rr(t){return P(t)?zr(mt(t)):function(t){return function(e){return _t(e,t)}}(t)}function $r(t){return"function"==typeof t?t:null==t?Er:"object"==typeof t?c(t)?function(t,e){return P(t)&&Or(e)?Sr(mt(t),e):function(r){var n=wt(r,t);return void 0===n&&n===e?Ar(r,t):mr(e,n,kr|Fr)}}(t[0],t[1]):xr(t):Rr(t)}function Dr(t,e){return(c(t)?Ct:me)(t,$r(e))}function Ir(t,e){var r=-1,n=de(t)?Array(t.length):[];return je(t,(function(t,o,i){n[++r]=e(t,o,i)})),n}function Tr(t,e){return(c(t)?pt:Ir)(t,$r(e))}function Cr(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}function Nr(t,e){var r;return(c(t)?Cr:je)(t,"function"==typeof(r=e)?r:Er)}function Lr(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=1,o=wt(r,"path"),i=wt(r,"fs");if(!Ot(t,{fs:i}))throw new Error(`fd[${t}] is not a folder`);return function t(r){let u=[];return Ot(r,{fs:i})?(Nr(i.readdirSync(r),(function(c){let f=o.resolve(r,c),a=null;try{a=i.statSync(f)}catch(t){}a&&a.isDirectory()?(u.push({isFolder:!0,level:n,path:f,name:o.basename(f)}),n+=1,(n<=e||null===e)&&(u=u.concat(t(f))),n-=1):u.push({isFolder:!1,level:n,path:f,name:o.basename(f)})})),u):u}(t)}function Mr(t){return"[object String]"===Object.prototype.toString.call(t)}function Br(t){return!(!Mr(t)||""===t)}var Ur=/\s/;var Wr=/^\s+/;function qr(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&Ur.test(t.charAt(e)););return e}(t)+1).replace(Wr,""):t}var Gr=NaN,Vr=/^[-+]0x[0-9a-f]+$/i,Jr=/^0b[01]+$/i,Hr=/^0o[0-7]+$/i,Qr=parseInt;function Kr(t){if("number"==typeof t)return t;if(O(t))return Gr;if(A(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=A(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=qr(t);var r=Jr.test(t);return r||Hr.test(t)?Qr(t.slice(2),r?2:8):Vr.test(t)?Gr:+t}var Xr=1/0,Yr=17976931348623157e292;function Zr(t){return t?(t=Kr(t))===Xr||t===-Xr?(t<0?-1:1)*Yr:t==t?t:0:0===t?t:0}function tn(t){var e=Zr(t),r=e%1;return e==e?r?e-r:e:0}function en(t){return"[object Number]"===Object.prototype.toString.call(t)}function rn(t){return t!=t}function nn(t){let e=!1;if(Br(t))e=!isNaN(Number(t));else if(en(t)){if(rn(t))return!1;e=!0}return e}function on(t){if(!nn(t))return 0;return Zr(t)}function un(t){return!!nn(t)&&(t=on(t),"number"==typeof(e=t)&&e==tn(e));var e}var cn=s.isFinite,fn=Math.min;var an=function(t){var e=Math[t];return function(t,r){if(t=Kr(t),(r=null==r?0:fn(tn(r),292))&&cn(t)){var n=(bt(t)+"e").split("e");return+((n=(bt(e(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return e(t)}}("round"),sn=an;function ln(t){if(!nn(t))return 0;t=on(t);let e=sn(t);return"0"===String(e)?0:e}function pn(t){if(!un(t))return!1;return ln(t)>=0}function hn(t,e){if(!Br(t))return"";if(!pn(e))return"";if(0===(e=ln(e)))return"";let r=t.length-e;return r<0&&(r=0),t.substring(r,r+e)}function vn(t,e){return Br(t)&&pn(e)?0===(e=ln(e))?"":t.substring(0,e):""}function yn(t,e){return Br(t)&&pn(e)?0===(e=ln(e))?t:vn(t,t.length-e):""}function dn(t){if(!Br(t))return{path:"",isRoot:!1};for(;t.indexOf("\\\\")>=0;)t=t.replace("\\\\","\\");for(;t.indexOf("//")>=0;)t=t.replace("//","/");if(":"===hn(t,1))return{path:`${t}\\`,isRoot:!0};if("\\"===hn(t,1)){let e=yn(t,1);return":"===hn(e,1)?{path:t,isRoot:!0}:{path:e,isRoot:!1}}if("/"===hn(t,1)){let e=yn(t,1);return 0===e.length?{path:t,isRoot:!0}:{path:e,isRoot:!1}}return{path:t,isRoot:!1}}function bn(t){if(!Br(t))return"";let e=dn(t);if(e.isRoot)return e.path;let r=e.path;try{r=r.split("\\").pop().split("/").pop()}catch(t){}return r}function gn(t){if(!Br(t))return"";let e=dn(t);if(e.isRoot)return e.path;let r=bn(t=e.path);if(!Br(r))return t;let n=dn(t=yn(t,r.length));return n.isRoot,n.path}function jn(t){if(!un(t))return!1;return ln(t)>0}let mn="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),_n=mn.length;function wn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,e=[];t=jn(t)?ln(t):32;for(let r=0;r<t;r++)e[r]=mn[0|Math.random()*_n];return e.join("")}function On(){let t,e,r=new Promise((function(){t=arguments[0],e=arguments[1]}));return r.resolve=t,r.reject=e,r}var Sn=Array.prototype.join;function xn(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i}function Pn(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:xn(t,e,r)}var An=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function kn(t){return An.test(t)}var Fn=ue&&ue.isRegExp,En=Fn?re(Fn):function(t){return _(t)&&"[object RegExp]"==m(t)};var zn="\\ud800-\\udfff",Rn="["+zn+"]",$n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Dn="\\ud83c[\\udffb-\\udfff]",In="[^"+zn+"]",Tn="(?:\\ud83c[\\udde6-\\uddff]){2}",Cn="[\\ud800-\\udbff][\\udc00-\\udfff]",Nn="(?:"+$n+"|"+Dn+")"+"?",Ln="[\\ufe0e\\ufe0f]?",Mn=Ln+Nn+("(?:\\u200d(?:"+[In,Tn,Cn].join("|")+")"+Ln+Nn+")*"),Bn="(?:"+[In+$n+"?",$n,Tn,Cn,Rn].join("|")+")",Un=RegExp(Dn+"(?="+Dn+")|"+Bn+Mn,"g");function Wn(t){return kn(t)?function(t){return t.match(Un)||[]}(t):function(t){return t.split("")}(t)}var qn=4294967295;function Gn(t,e,r){return r&&"number"!=typeof r&&function(t,e,r){if(!A(r))return!1;var n=typeof e;return!!("number"==n?de(r)&&Yt(e,r.length):"string"==n&&e in r)&&K(r[e],t)}(t,e,r)&&(e=r=void 0),(r=void 0===r?qn:r>>>0)?(t=bt(t))&&("string"==typeof e||null!=e&&!En(e))&&!(e=dt(e))&&kn(t)?Pn(Wn(t),0,r):t.split(e,r):[]}var Vn="[object String]";var Jn=zr("length"),Hn="\\ud800-\\udfff",Qn="["+Hn+"]",Kn="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Xn="\\ud83c[\\udffb-\\udfff]",Yn="[^"+Hn+"]",Zn="(?:\\ud83c[\\udde6-\\uddff]){2}",to="[\\ud800-\\udbff][\\udc00-\\udfff]",eo="(?:"+Kn+"|"+Xn+")"+"?",ro="[\\ufe0e\\ufe0f]?",no=ro+eo+("(?:\\u200d(?:"+[Yn,Zn,to].join("|")+")"+ro+eo+")*"),oo="(?:"+[Yn+Kn+"?",Kn,Zn,to,Qn].join("|")+")",io=RegExp(Xn+"(?="+Xn+")|"+oo+no,"g");function uo(t){return kn(t)?function(t){for(var e=io.lastIndex=0;io.test(t);)++e;return e}(t):Jn(t)}var co="[object Map]",fo="[object Set]";function ao(t){if(null==t)return 0;if(de(t))return"string"==typeof(e=t)||!c(e)&&_(e)&&m(e)==Vn?uo(t):t.length;var e,r=hr(t);return r==co||r==fo?t.size:ye(t).length}function so(t){return"[object Array]"===Object.prototype.toString.call(t)}function lo(t){return!!so(t)&&0===t.length}function po(t){return"[object Undefined]"===Object.prototype.toString.call(t)}function ho(t){return"[object Null]"===Object.prototype.toString.call(t)}function vo(t){return"[object Object]"===Object.prototype.toString.call(t)}function yo(t){if(vo(t)){for(let e in t)return!1;return!0}return!1}function bo(t){return!(!Mr(t)||""!==t)}function go(t){return!!po(t)||(!!ho(t)||(!!yo(t)||(!!bo(t)||(!!lo(t)||!!rn(t)))))}function jo(t){let e=Object.prototype.toString.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e}function mo(t){if(!un(t))return!1;return ln(t)<0}function _o(t){let e,r=Object.prototype.toString.call(t);if(e="[object Promise]"===r,e)return!0;if("[object Function]"!==r)return!1;try{e="function"!=typeof t.subscribe&&"function"==typeof t.then}catch(t){}return e}let wo=function(t){if(!jo(t))throw new Error("fn is not a function");return function(){let e=On(),r=null,n=null;try{r=t.apply(this,arguments)}catch(t){n=t}return null!==n?e.resolve({state:"error",msg:n}):_o(r)?r.then((t=>{e.resolve({state:"success",msg:t})})).catch((t=>{"cancelled"===wt(t,"reason")?e.resolve({state:"cancelled",msg:""}):e.resolve({state:"error",msg:t})})):e.resolve({state:"success",msg:r}),e}};function Oo(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};if(!jo(t))return null;function r(t,e){let r;return ho(t)||po(t)?e:(r=wt(t,"data",null),r||t)}return jo(e)||(e=()=>{}),function(){let n,o=On(),i=e({mode:"before",data:arguments});return(ho(i)||po(i))&&(i=arguments),t(...i).then((t=>{n=e({mode:"afterThen",data:t}),t=r(n,t),o.resolve(t)})).catch((t=>{n=e({mode:"afterCatch",data:t}),t=r(n,t),o.reject(t)})),o}}function So(t){return null==t?[]:function(t,e){return pt(e,(function(e){return t[e]}))}(t,be(t))}function xo(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=0,r=[];mo(t)&&(t=0),t=ln(t);let n=u();return n.get=function(){if(r.length>0){return e+=1,r.splice(0,1)[0]}return null},n.cb=function(){e-=1,e<0&&(e=0),r.length>0&&n.emit("message",r)},n.push=function(o){r.push(o),(t<=0||e<t)&&n.emit("message",r)},n.clear=function(){e=0,r=[]},n}function Po(t){return t!=t}function Ao(t,e,r){return e==e?function(t,e,r){for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}(t,e,r):function(t,e,r,n){for(var o=t.length,i=r+(n?1:-1);n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,Po,r)}function ko(t,e,r){if((t=bt(t))&&(r||void 0===e))return qr(t);if(!t||!(e=dt(e)))return t;var n=Wn(t),o=Wn(e),i=function(t,e){for(var r=-1,n=t.length;++r<n&&Ao(e,t[r],0)>-1;);return r}(n,o),u=function(t,e){for(var r=t.length;r--&&Ao(e,t[r],0)>-1;);return r}(n,o)+1;return Pn(n,i,u).join("")}t.evem=u,t.fsCleanFolder=function(t){return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=wt(e,"path"),n=wt(e,"fs");if(!n.existsSync(t)){let e=St(t,{fs:n});return e.error?e.error:{success:"done: "+t}}if(!Ot(t,{fs:n}))return{error:"input path is not a folder"};try{let e=n.readdirSync(t);for(let o of e){let e=r.join(t,o);n.statSync(e).isDirectory()?n.rmSync(e,{recursive:!0,force:!0}):n.unlinkSync(e)}}catch(t){return{error:t}}return{success:"done: "+t}}(t,{path:e,fs:r})},t.fsCopyFile=function(t,n){return Rt(t,n,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$t(Object(r),!0).forEach((function(e){At(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$t(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({path:e,fs:r},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}))},t.fsCopyFolder=function(t,n){return It(t,n,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Tt(Object(r),!0).forEach((function(e){At(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({path:e,fs:r},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}))},t.fsCreateFolder=function(t){return St(t,{fs:r})},t.fsDeleteFolder=function(t){return function(t){let e=wt(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"fs");if(!e.existsSync(t))return{success:"folder does not exist: "+t};if(!Ot(t,{fs:e}))return{error:"input path is not a folder: "+t};try{e.rmSync(t,{recursive:!0,force:!0})}catch(t){return{error:t}}return{success:"done: "+t}}(t,{fs:r})},t.fsGetFilesInFolder=function(t){return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=wt(r,"path"),o=wt(r,"fs");if(!Ot(t,{fs:o}))throw new Error(`fd[${t}] is not a folder`);let i=[];return i=Lr(t,e,{path:n,fs:o}),i=Dr(i,{isFolder:!1}),i=Tr(i,(t=>(delete t.isFolder,t))),i}(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{path:e,fs:r})},t.fsGetFoldersInFolder=function(t){return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=wt(r,"path"),o=wt(r,"fs");if(!Ot(t,{fs:o}))throw new Error(`fd[${t}] is not a folder`);let i=[];return i=Lr(t,e,{path:n,fs:o}),i=Dr(i,{isFolder:!0}),i=Tr(i,(t=>(delete t.isFolder,t))),i}(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{path:e,fs:r})},t.fsIsFile=function(t){return zt(t,{fs:r})},t.fsIsFolder=function(t){return Ot(t,{fs:r})},t.fsReadText=function(t){return function(t){let e=null,r=wt(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"fs"),n="";try{n=r.readFileSync(t,"utf8")}catch(t){e=t}return null!==e?{error:e}:{success:n}}(t,{fs:r})},t.fsTreeFolder=function(t){return Lr(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{path:e,fs:r})},t.fsWriteText=function(t,e){return function(t,e){let r=null,n=wt(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},"fs"),o=gn(t);Ot(o,{fs:n})||St(o,{fs:n});try{n.writeFileSync(t,e,"utf8")}catch(t){r=t}return null!==r?{error:r}:{success:t}}(t,e,{fs:r})},t.genID=wn,t.genPm=On,t.getClearPathName=dn,t.getFileName=bn,t.getFileTrueName=function(t){if(!Br(t))return"";let e=bn(t),r=Gn(e,".");if(ao(r)<=1)return e;let n="";try{r=(c=null==(o=r)?0:o.length)?xn(o,0,(i=c-(i=u||void 0===i?1:tn(i)))<0?0:i):[],n=function(t,e){return null==t?"":Sn.call(t,e)}(r,".")}catch(t){}var o,i,u,c;return n},t.getGlobal=function(){return"undefined"!=typeof self?self:"undefined"!=typeof window&&void 0!==window.document?window:"undefined"!=typeof global?global:null},t.getPathParent=gn,t.isEmail=function(t){return!!Br(t)&&/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t)},t.isIE=function(){return null!==navigator.userAgent.toLowerCase().match(/rv:([\d.]+)\) like gecko/)},t.isab=function(t){return"[object ArrayBuffer]"===Object.prototype.toString.call(t)},t.isarr=so,t.isarr0=lo,t.isblob=function(t){return"[object Blob]"===Object.prototype.toString.call(t)},t.isbol=Et,t.isearr=function(t){return!!so(t)&&(0!==t.length&&(1!==t.length||!go(t[0])))},t.iseobj=function(t){if(vo(t)){for(let e in t)return!0;return!1}return!1},t.iser=go,t.isernot=function(t){return!go(t)},t.isestr=Br,t.isfun=jo,t.isint=un,t.isn0int=function(t){return!!un(t)&&ln(t)<=0},t.isn0num=function(t){return!!nn(t)&&on(t)<=0},t.isnbr=en,t.isnint=mo,t.isnull=ho,t.isnum=nn,t.isobj=vo,t.isobj0=yo,t.isp0int=pn,t.isp0num=function(t){return!!nn(t)&&on(t)>=0},t.ispint=jn,t.ispm=_o,t.isstr=Mr,t.isstr0=bo,t.isundefined=po,t.j2o=function(t){if(!Br(t))return{};let e={};try{e=JSON.parse(t)}catch(t){e={}}return e},t.o2j=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(po(t))return"";let r="";try{r=e?JSON.stringify(t,null,2):JSON.stringify(t)}catch(t){r=""}return r},t.pm2resolve=wo,t.pmChain=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!so(t)){let t=On();return t.reject("pms is not an array"),t}return t.reduce(((t,e)=>t.then(e)),Promise.resolve(e))},t.pmHook=Oo,t.pmHookReject=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};return jo(t)?(jo(e)||(e=()=>{}),Oo(t,(t=>{if("afterCatch"===t.mode)return e(t.data)}))):null},t.pmIni=function(){return Promise.resolve()},t.pmMap=function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n={},o=!1,i=On();if(!so(t)&&!vo(t))return i.reject("rs is not an array or object"),i;let u=!1;if(vo(t)){u=!0;let e=[];Nr(t,((t,r)=>{e.push({k:r,v:t})})),t=e}let c=xo(r);return c.on("message",(function(r){if(o)return;let f,a=c.get();if(jo(e)){let t=a.key,r=a.value;u&&(t=a.value.k,r=a.value.v),f=e(r,t)}else f=a.value;f.then((t=>{n[a.key]=t})).catch((t=>{o=!0,c.clear(),i.reject(t)})).finally((()=>{c.cb(),ao(n)===ao(t)&&i.resolve(So(n))}))})),Nr(t,((t,e)=>{c.push({key:e,value:t})})),i},t.pmQueue=function(){return new function(t,e){let r=null;pn(t)||(t=0),t=ln(t),Ft(e)||(e=!1);let n=xo(t);return n.on("message",(async function(t){let e=n.get();if(!e)return;await function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;nn(t)||(t=10);let e=On();return setTimeout((function(){e.resolve()}),t),e}(1);let r,o=wt(e,"id"),i=wt(e,"fun"),u=wt(e,"input");r=jo(i)?await wo(i)(...u):{state:"error",msg:"fun is not a function"},n.emit(o,r),n.cb()})),function(t){let o=On(),i=wn();r=i;for(var u=arguments.length,c=new Array(u>1?u-1:0),f=1;f<u;f++)c[f-1]=arguments[f];let a={id:i,fun:t,input:c};return n.push(a),n.once(i,(t=>{e?i===r?"success"===t.state?o.resolve(t.msg):o.reject(t.msg):o.reject({reason:"cancelled"}):"success"===t.state?o.resolve(t.msg):o.reject(t.msg)})),o}}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]&&arguments[1])},t.pmSeries=function(t,e){let r=On();if(!so(t)&&!vo(t))return r.reject("rs is not an array or object"),r;let n=!1;if(vo(t)){n=!0;let e=[];Nr(t,((t,r)=>{e.push({k:r,v:t})})),t=e}jo(e)||(e=function(t){return t});let o=-1,i=[];return t.reduce((function(t,r){return t.then((function(t){i.push(t),o+=1;let u=o,c=r;return n&&(u=r.k,c=r.v),jo(e)?e(c,u):c}))}),Promise.resolve()).then((function(t){var e,n,o,u;i.push(t),u=null==(e=i)?0:e.length,i=u?xn(e,(n=o||void 0===n?1:tn(n))<0?0:n,u):[],r.resolve(i)})).catch((function(t){r.reject(t)})),r},t.pmThrottle=function(){let t=u(),e=[],r=null,n=!1;return function(o){let i=On();if(!jo(o))return void console.log("func is not a function");let u=wn();for(var c=arguments.length,f=new Array(c>1?c-1:0),a=1;a<c;a++)f[a-1]=arguments[a];return e.push({id:u,func:o,input:f}),null===r&&(r=setInterval((async()=>{if(n)return;n=!0;let o=e.pop();for(let r=0;r<e.length;r++){let n=e[r].id,o={state:"cancelled"};t.emit(n,o)}if(e=[],o){let e,r=o.id;e=jo(o.func)?await wo(o.func)(...o.input):{state:"error",msg:"fun is not a function"},t.emit(r,e)}n=!1,n||0!==e.length||(clearInterval(r),r=null)}),10)),t.once(u,(t=>{"success"===t.state?i.resolve(t.msg):"cancelled"===t.state?i.reject({reason:"cancelled"}):i.reject(t.msg)})),i}},t.replace=function(t,e,r){return Br(t)&&Br(e)&&Mr(r)?String(t).replaceAll(e,r):""},t.sep=function(t,e){if(!Br(t))return[];if(!Br(e))return[];let r=function(t,e){return Br(t)&&Br(e)?t.split(e):[]}(t,e);r=Tr(r,ko);let n=[];return Nr(r,(function(t){Br(t)&&n.push(t)})),n},t.strdelleft=function(t,e){return Br(t)&&pn(e)?0===(e=ln(e))?t:hn(t,t.length-e):""},t.strdelright=yn,t.strleft=vn,t.strmid=function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Br(t)&&pn(e)?(r=jn(r)?ln(r):1,t.substring(e,e+r)):""},t.strright=hn,t.waitFun=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,n=On();if(!jo(t))return n.reject("waitfunction需輸入函數f"),n;let o=async()=>{let e=t();return _o(e)&&(e=await e),e};if(r=await o(),!0===r)return n.resolve(),n;let i=wt(e,"attemptNum",null);jn(i)||(i=200);let u=wt(e,"timeInterval",null);jn(u)||(u=1e3);let c=0,f=setInterval((async()=>{c+=1,r=await o(),!0===r&&(clearInterval(f),n.resolve()),c>i&&(clearInterval(f),n.reject(`exceeded attemptNum[${i}]`))}),u);return n}}));
