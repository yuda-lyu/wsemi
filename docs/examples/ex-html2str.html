<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-tw">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <title>examples for html2str(htmlparser)</title>
    
    <script type="module"> 
        import {htmlToText} from 'https://cdn.jsdelivr.net/npm/html-to-text@9.0.5/+esm' 
        window.ht = {htmlToText}
    </script>

    <script src="https://cdn.jsdelivr.net/npm/wsemi@1.8.40/dist/wsemi.umd.js"></script>

</head>
<body style="margin:0px; padding:0px;">

    <div style="padding:30px;">

        <div>

            <div>
                html(input)
            </div>

            <textarea id="ta_html" style="width:100%; height:200px; box-sizing:border-box;" oninput="cv_html2str()"></textarea>
                
        </div>

        <div style="padding-top:20px;"></div>

        <div>

            <div>
                text(output)
            </div>

            <textarea id="ta_txt" style="width:100%; height:200px; box-sizing:border-box;" _oninput=""></textarea>
                
        </div>

    </div>

    <script>

        let h='<!DOCTYPE html>\n'
        h+='<html>\n'
        h+='\n'
        h+='<body>\n'
        h+='    <h1>My First Heading</h1>\n'
        h+='    <p>My first paragraph.</p>\n'
        h+='</body>\n'
        h+='\n'
        h+='</html>\n'

        let _html=h
        let _str=''

        document.querySelector('#ta_html').value=_html
        document.querySelector('#ta_txt').value=_str

    </script>
    
    <script>

        function cv_html2str(){

            let inp = document.querySelector('#ta_html').value
            // console.log('inp', inp)

            wsemi.html2str(inp)
                .then((tar)=>{
                    console.log('tar', tar)
                    document.querySelector('#ta_txt').value = tar
                })
                .catch((err)=>{
                    console.log(err)
                })

        }

        //first 
        cv_html2str()

    </script>

</body>
</html>