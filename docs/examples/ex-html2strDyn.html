<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-tw">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <title>examples for html2strDyn(htmlparser)</title>
    
    <!-- @babel/polyfill已廢棄 -->
    <script nomodule src="https://cdn.jsdelivr.net/npm/@babel/polyfill@7.12.1/dist/polyfill.min.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/wsemi@1.8.33/dist/wsemi.umd.js"></script>

</head>
<body style="margin:0px; padding:0px;">

    <div style="padding:30px;">

        <div>

            <div>
                html(source)
            </div>

            <textarea id="ta_html" style="width:100%; height:200px; box-sizing:border-box;" oninput="cv_html2str()"></textarea>
                
        </div>

        <div style="padding-top:20px;"></div>

        <div>

            <div>
                text(target)
            </div>

            <textarea id="ta_str" style="width:100%; height:200px; box-sizing:border-box;" _oninput=""></textarea>
                
        </div>

    </div>

    <script>

        let h='<!DOCTYPE html>\n'
        h+='<html>\n'
        h+='\n'
        h+='<body>\n'
        h+='    <h1>My First Heading</h1>\n'
        h+='    <p>My first paragraph.</p>\n'
        h+='</body>\n'
        h+='\n'
        h+='</html>\n'

        let _html=h
        let _str=''

        document.querySelector('#ta_html').value=_html
        document.querySelector('#ta_str').value=_str

    </script>
    
    <script>

        function cv_html2str(){

            let ori = document.querySelector('#ta_html').value
            // console.log('ori', ori)
                
            let tar = ''
            wsemi.html2strDyn(ori)
                .then(function(res){
                    tar = res
                })
                .catch((err)=>{
                    console.log(err)
                })
                .finally(()=>{
                    // console.log('tar', tar)
                    document.querySelector('#ta_str').value = tar
                })

        }

        //first 
        cv_html2str()

    </script>

</body>
</html>