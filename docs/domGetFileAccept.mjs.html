<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>domGetFileAccept.mjs - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="wsemi.html">wsemi</a><ul class='methods'><li data-type='method'><a href="wsemi.html#.ab2blob">ab2blob</a></li><li data-type='method'><a href="wsemi.html#.ab2u8arr">ab2u8arr</a></li><li data-type='method'><a href="wsemi.html#.addMonth">addMonth</a></li><li data-type='method'><a href="wsemi.html#.arr2dt">arr2dt</a></li><li data-type='method'><a href="wsemi.html#.arraccum">arraccum</a></li><li data-type='method'><a href="wsemi.html#.arradd">arradd</a></li><li data-type='method'><a href="wsemi.html#.arrat">arrat</a></li><li data-type='method'><a href="wsemi.html#.arrdiff">arrdiff</a></li><li data-type='method'><a href="wsemi.html#.arrfind">arrfind</a></li><li data-type='method'><a href="wsemi.html#.arrhas">arrhas</a></li><li data-type='method'><a href="wsemi.html#.arrpull">arrpull</a></li><li data-type='method'><a href="wsemi.html#.b642obj">b642obj</a></li><li data-type='method'><a href="wsemi.html#.b642str">b642str</a></li><li data-type='method'><a href="wsemi.html#.b642u8arr">b642u8arr</a></li><li data-type='method'><a href="wsemi.html#.binstr">binstr</a></li><li data-type='method'><a href="wsemi.html#.cdbl">cdbl</a></li><li data-type='method'><a href="wsemi.html#.cfilesize">cfilesize</a></li><li data-type='method'><a href="wsemi.html#.cfinancial">cfinancial</a></li><li data-type='method'><a href="wsemi.html#.cint">cint</a></li><li data-type='method'><a href="wsemi.html#.clearXSS">clearXSS</a></li><li data-type='method'><a href="wsemi.html#.cstr">cstr</a></li><li data-type='method'><a href="wsemi.html#.day2cht">day2cht</a></li><li data-type='method'><a href="wsemi.html#.dig">dig</a></li><li data-type='method'><a href="wsemi.html#.digExp">digExp</a></li><li data-type='method'><a href="wsemi.html#.domAppend">domAppend</a></li><li data-type='method'><a href="wsemi.html#.domFind">domFind</a></li><li data-type='method'><a href="wsemi.html#.domFinds">domFinds</a></li><li data-type='method'><a href="wsemi.html#.domGetFileAccept">domGetFileAccept</a></li><li data-type='method'><a href="wsemi.html#.domGetFiles">domGetFiles</a></li><li data-type='method'><a href="wsemi.html#.domRemove">domRemove</a></li><li data-type='method'><a href="wsemi.html#.domShowInputAndGetFiles">domShowInputAndGetFiles</a></li><li data-type='method'><a href="wsemi.html#.domShowInputAndGetFilesU8Arrs">domShowInputAndGetFilesU8Arrs</a></li><li data-type='method'><a href="wsemi.html#.domTriggerEvent">domTriggerEvent</a></li><li data-type='method'><a href="wsemi.html#.downloadExcelFileFromData">downloadExcelFileFromData</a></li><li data-type='method'><a href="wsemi.html#.downloadFileFromBlob">downloadFileFromBlob</a></li><li data-type='method'><a href="wsemi.html#.downloadFileFromText">downloadFileFromText</a></li><li data-type='method'><a href="wsemi.html#.downloadFileFromU8Arr">downloadFileFromU8Arr</a></li><li data-type='method'><a href="wsemi.html#.dtmapping">dtmapping</a></li><li data-type='method'><a href="wsemi.html#.dtpick">dtpick</a></li><li data-type='method'><a href="wsemi.html#.f2c">f2c</a></li><li data-type='method'><a href="wsemi.html#.file2u8arr">file2u8arr</a></li><li data-type='method'><a href="wsemi.html#.files2u8arrs">files2u8arrs</a></li><li data-type='method'><a href="wsemi.html#.fsReadText">fsReadText</a></li><li data-type='method'><a href="wsemi.html#.fsWriteText">fsWriteText</a></li><li data-type='method'><a href="wsemi.html#.fuzzfind">fuzzfind</a></li><li data-type='method'><a href="wsemi.html#.genGradientColor">genGradientColor</a></li><li data-type='method'><a href="wsemi.html#.genID">genID</a></li><li data-type='method'><a href="wsemi.html#.genPm">genPm</a></li><li data-type='method'><a href="wsemi.html#.getDataFromExcelFileU8Arr">getDataFromExcelFileU8Arr</a></li><li data-type='method'><a href="wsemi.html#.getdtv">getdtv</a></li><li data-type='method'><a href="wsemi.html#.getdtvstr">getdtvstr</a></li><li data-type='method'><a href="wsemi.html#.getltdtkeys">getltdtkeys</a></li><li data-type='method'><a href="wsemi.html#.getObjSize">getObjSize</a></li><li data-type='method'><a href="wsemi.html#.getUserAgent">getUserAgent</a></li><li data-type='method'><a href="wsemi.html#.haskey">haskey</a></li><li data-type='method'><a href="wsemi.html#.hsl">hsl</a></li><li data-type='method'><a href="wsemi.html#.isarr">isarr</a></li><li data-type='method'><a href="wsemi.html#.isarr0">isarr0</a></li><li data-type='method'><a href="wsemi.html#.isbol">isbol</a></li><li data-type='method'><a href="wsemi.html#.isday">isday</a></li><li data-type='method'><a href="wsemi.html#.isdev">isdev</a></li><li data-type='method'><a href="wsemi.html#.isearr">isearr</a></li><li data-type='method'><a href="wsemi.html#.isEleExist">isEleExist</a></li><li data-type='method'><a href="wsemi.html#.iseobj">iseobj</a></li><li data-type='method'><a href="wsemi.html#.iser">iser</a></li><li data-type='method'><a href="wsemi.html#.isernot">isernot</a></li><li data-type='method'><a href="wsemi.html#.isestr">isestr</a></li><li data-type='method'><a href="wsemi.html#.isfun">isfun</a></li><li data-type='method'><a href="wsemi.html#.isint">isint</a></li><li data-type='method'><a href="wsemi.html#.ismonth">ismonth</a></li><li data-type='method'><a href="wsemi.html#.isn0int">isn0int</a></li><li data-type='method'><a href="wsemi.html#.isNarrow">isNarrow</a></li><li data-type='method'><a href="wsemi.html#.isnbr">isnbr</a></li><li data-type='method'><a href="wsemi.html#.isnint">isnint</a></li><li data-type='method'><a href="wsemi.html#.isnull">isnull</a></li><li data-type='method'><a href="wsemi.html#.isnum">isnum</a></li><li data-type='method'><a href="wsemi.html#.isobj">isobj</a></li><li data-type='method'><a href="wsemi.html#.isobj0">isobj0</a></li><li data-type='method'><a href="wsemi.html#.isp0int">isp0int</a></li><li data-type='method'><a href="wsemi.html#.ispint">ispint</a></li><li data-type='method'><a href="wsemi.html#.isstr">isstr</a></li><li data-type='method'><a href="wsemi.html#.isstr0">isstr0</a></li><li data-type='method'><a href="wsemi.html#.isStrHasCapital">isStrHasCapital</a></li><li data-type='method'><a href="wsemi.html#.isStrHasLowerCase">isStrHasLowerCase</a></li><li data-type='method'><a href="wsemi.html#.isStrHasNumber">isStrHasNumber</a></li><li data-type='method'><a href="wsemi.html#.istime">istime</a></li><li data-type='method'><a href="wsemi.html#.isu8arr">isu8arr</a></li><li data-type='method'><a href="wsemi.html#.isundefined">isundefined</a></li><li data-type='method'><a href="wsemi.html#.isUserIdentify">isUserIdentify</a></li><li data-type='method'><a href="wsemi.html#.isUserName">isUserName</a></li><li data-type='method'><a href="wsemi.html#.isUserPW">isUserPW</a></li><li data-type='method'><a href="wsemi.html#.j2o">j2o</a></li><li data-type='method'><a href="wsemi.html#.keysmat2ltdt">keysmat2ltdt</a></li><li data-type='method'><a href="wsemi.html#.ltdt2mat">ltdt2mat</a></li><li data-type='method'><a href="wsemi.html#.ltdt2vrtsable">ltdt2vrtsable</a></li><li data-type='method'><a href="wsemi.html#.ltdth2mat">ltdth2mat</a></li><li data-type='method'><a href="wsemi.html#.ltdtmapping">ltdtmapping</a></li><li data-type='method'><a href="wsemi.html#.mat2ltdt">mat2ltdt</a></li><li data-type='method'><a href="wsemi.html#.matat">matat</a></li><li data-type='method'><a href="wsemi.html#.nowstr">nowstr</a></li><li data-type='method'><a href="wsemi.html#.nowstrday">nowstrday</a></li><li data-type='method'><a href="wsemi.html#.o2j">o2j</a></li><li data-type='method'><a href="wsemi.html#.obj2b64">obj2b64</a></li><li data-type='method'><a href="wsemi.html#.obj2pb64">obj2pb64</a></li><li data-type='method'><a href="wsemi.html#.onTooltip">onTooltip</a></li><li data-type='method'><a href="wsemi.html#.oo">oo</a></li><li data-type='method'><a href="wsemi.html#.openLink">openLink</a></li><li data-type='method'><a href="wsemi.html#.pb642obj">pb642obj</a></li><li data-type='method'><a href="wsemi.html#.psChain">psChain</a></li><li data-type='method'><a href="wsemi.html#.replace">replace</a></li><li data-type='method'><a href="wsemi.html#.replaceObj">replaceObj</a></li><li data-type='method'><a href="wsemi.html#.replacePlus">replacePlus</a></li><li data-type='method'><a href="wsemi.html#.repObj">repObj</a></li><li data-type='method'><a href="wsemi.html#.round">round</a></li><li data-type='method'><a href="wsemi.html#.sep">sep</a></li><li data-type='method'><a href="wsemi.html#.sepInt">sepInt</a></li><li data-type='method'><a href="wsemi.html#.split">split</a></li><li data-type='method'><a href="wsemi.html#.str2b64">str2b64</a></li><li data-type='method'><a href="wsemi.html#.str2md5">str2md5</a></li><li data-type='method'><a href="wsemi.html#.str2sha512">str2sha512</a></li><li data-type='method'><a href="wsemi.html#.strdelleft">strdelleft</a></li><li data-type='method'><a href="wsemi.html#.strdelright">strdelright</a></li><li data-type='method'><a href="wsemi.html#.strleft">strleft</a></li><li data-type='method'><a href="wsemi.html#.strmid">strmid</a></li><li data-type='method'><a href="wsemi.html#.strright">strright</a></li><li data-type='method'><a href="wsemi.html#.time2day">time2day</a></li><li data-type='method'><a href="wsemi.html#.time2expire">time2expire</a></li><li data-type='method'><a href="wsemi.html#.time2hour">time2hour</a></li><li data-type='method'><a href="wsemi.html#.time2min">time2min</a></li><li data-type='method'><a href="wsemi.html#.time2past">time2past</a></li><li data-type='method'><a href="wsemi.html#.timebetween">timebetween</a></li><li data-type='method'><a href="wsemi.html#.timerange">timerange</a></li><li data-type='method'><a href="wsemi.html#.trim">trim</a></li><li data-type='method'><a href="wsemi.html#.u8arr2b64">u8arr2b64</a></li><li data-type='method'><a href="wsemi.html#.u8arr2blob">u8arr2blob</a></li><li data-type='method'><a href="wsemi.html#.viewJsonTable">viewJsonTable</a></li><li data-type='method'><a href="wsemi.html#.viewJsonTree">viewJsonTree</a></li><li data-type='method'><a href="wsemi.html#.waitfunction">waitfunction</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">domGetFileAccept.mjs</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import map from 'lodash/map'
import concat from 'lodash/concat'
import filter from 'lodash/filter'
import join from 'lodash/join'
import isstr from './isstr.mjs'
import isearr from './isearr.mjs'
import isernot from './isernot.mjs'


/**
 * 前端依照檔案類型或種類回傳input file的accept欄位所用字串
 * kind若需使用種類，可選為'docums', 'compress', 'image', 'data'，或複選以陣列儲存傳入
 * kind若需使用通用檔案，可使用'common'
 *
 * Unit Test: {@link https://github.com/yuda-lyu/wsemi/blob/master/test/domGetFileAccept.test.js Github}
 *
 * @example
 *
 * @memberOf wsemi
 * @param {String|Array} [kind='*'] 輸入檔案類型或種類字串或陣列
 * @returns {String} 回傳input file的accept欄位所用字串
 */
function domGetFileAccept(kind = '*') {

    //check all
    if (kind === '*') {
        return kind
    }

    //check not string or array
    if (!isstr(kind) &amp;&amp; !isearr(kind)) {
        return '*'
    }

    //check common
    if (kind === 'common') {
        kind = ['docums', 'compress', 'image', 'data']
    }

    //data, MIME_types: https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Complete_list_of_MIME_types
    let data = [
        {
            name: 'htm',
            group: 'docums',
            acp: '.htm',
        },
        {
            name: 'html',
            group: 'docums',
            acp: '.html',
        },
        {
            name: 'pdf',
            group: 'docums',
            acp: 'application/pdf',
        },
        {
            name: 'rtf',
            group: 'docums',
            acp: 'application/rtf',
        },
        {
            name: 'doc',
            group: 'docums',
            acp: 'application/msword',
        },
        {
            name: 'docx',
            group: 'docums',
            acp: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
        },
        {
            name: 'ppt',
            group: 'docums',
            acp: 'application/vnd.ms-powerpoint',
        },
        {
            name: 'pptx',
            group: 'docums',
            acp: 'application/vnd.openxmlformats-officedocument.presentationml.presentation',
        },
        {
            name: 'xls',
            group: 'docums',
            acp: 'application/vnd.ms-excel',
        },
        {
            name: 'xlsx',
            group: 'docums',
            acp: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
        },
        {
            name: 'odt',
            group: 'docums',
            acp: 'application/vnd.oasis.opendocument.text',
        },
        {
            name: 'odp',
            group: 'docums',
            acp: 'application/vnd.oasis.opendocument.presentation',
        },
        {
            name: 'application/vnd.oasis.opendocument.spreadsheet',
            group: 'docums',
            acp: 'application/vnd.oasis.opendocument.spreadsheet',
        },
        {
            name: 'zip',
            group: 'compress',
            acp: 'application/zip',
        },
        {
            name: 'rar',
            group: 'compress',
            acp: 'application/x-rar-compressed',
        },
        {
            name: '7z',
            group: 'compress',
            acp: 'application/x-7z-compressed',
        },
        {
            name: 'bzip',
            group: 'compress',
            acp: 'application/x-bzip',
        },
        {
            name: 'bzip2',
            group: 'compress',
            acp: 'application/x-bzip2',
        },
        {
            name: 'pic',
            group: 'image',
            acp: 'image/*',
        },
        {
            name: 'xml',
            group: 'data',
            acp: '.xml',
        },
        {
            name: 'json',
            group: 'data',
            acp: '.json',
        },
        {
            name: 'txt',
            group: 'data',
            acp: '.txt',
        },
        {
            name: 'csv',
            group: 'data',
            acp: '.csv',
        },
        {
            name: 'dat',
            group: 'data',
            acp: '.dat',
        },
    ]

    function getName(name) {
        let rs = filter(data, { name: name })
        return getAcp(rs)
    }

    function getMode(kind) {
        let rs = filter(data, { group: kind })
        return getAcp(rs)
    }

    function getAcp(rs) {
        return map(rs, 'acp')
    }

    //convert to array
    if (isstr(kind)) {
        kind = [kind]
    }

    //accept string
    let c = ''
    if (isearr(kind)) {
        let r1 = map(kind, function(v) {
            return getMode(v)
        })
        let r2 = map(kind, function(v) {
            return getName(v)
        })
        let r = concat(r1, r2)
        r = filter(r, isernot)
        c = join(r, ',')
    }

    return c
}


export default domGetFileAccept
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.2</a> on Tue May 14 2019 13:48:32 GMT+0800 (GMT+08:00) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
